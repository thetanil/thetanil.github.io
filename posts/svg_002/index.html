<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><title>SVG with Normalized Coordinates | Theta Nil's Site</title><link rel=stylesheet href=/css/main.min.c7a5c1c6627bdd92510df0d2272d0f86694f49366048d0ee3065e20d315759b3.css integrity="sha256-x6XBxmJ73ZJRDfDSJy0PhmlPSTZgSNDuMGXiDTFXWbM=" crossorigin=anonymous><script src=/js/main.23cd0c7d837263b9eaeb96ee2d9ccfa2969daa3fa00fa1c1fe8701a9b87251a1.js integrity="sha256-I80MfYNyY7nq65buLZzPopadqj+gD6HB/ocBqbhyUaE=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js></script><script>function getMermaidTheme(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"default"}function initializeMermaid(){mermaid.initialize({startOnLoad:!1,theme:getMermaidTheme(),securityLevel:"loose",fontFamily:"inherit",themeVariables:{primaryColor:window.matchMedia("(prefers-color-scheme: dark)").matches?"#66b3ff":"#00e",primaryTextColor:window.matchMedia("(prefers-color-scheme: dark)").matches?"#e8e8e8":"#222",primaryBorderColor:window.matchMedia("(prefers-color-scheme: dark)").matches?"#444":"#222",lineColor:window.matchMedia("(prefers-color-scheme: dark)").matches?"#444":"#222",sectionBkgColor:window.matchMedia("(prefers-color-scheme: dark)").matches?"#2a2a2a":"#f9f9f9",altSectionBkgColor:window.matchMedia("(prefers-color-scheme: dark)").matches?"#1a1a1a":"#fff",gridColor:window.matchMedia("(prefers-color-scheme: dark)").matches?"#444":"#e0e0e0",tertiaryColor:window.matchMedia("(prefers-color-scheme: dark)").matches?"#3a3a3a":"#f0f0f0"}})}function processMermaidBlocks(){const e=document.querySelectorAll("code.language-mermaid");e.forEach((e,t)=>{const n=document.createElement("div");n.className="mermaid",n.id="mermaid-"+t,n.textContent=e.textContent;const s=e.parentElement;s.parentElement.replaceChild(n,s)}),e.length>0&&mermaid.init()}if(document.addEventListener("DOMContentLoaded",function(){initializeMermaid(),processMermaidBlocks()}),window.matchMedia){const e=window.matchMedia("(prefers-color-scheme: dark)");e.addEventListener("change",function(){initializeMermaid();const t=document.querySelectorAll(".mermaid");t.forEach((e,t)=>{e.id="mermaid-rerender-"+t,e.removeAttribute("data-processed")}),t.length>0&&mermaid.init()})}</script></head><body><header><h1>Theta Nil's Site</h1><nav><ul><li><a href=/>Home</a></li><li><a aria-current=true class=ancestor href=/posts/>Posts</a></li><li><a href=/tags/>Tags</a></li></ul></nav></header><main><h1>SVG with Normalized Coordinates</h1><time datetime=2025-10-08T00:00:00+00:00>October 8, 2025</time><p>This post demonstrates how to generate SVG content with JavaScript using normalized coordinates (-1 to 1) similar to fragment shaders.</p><div style="display:flex;flex-wrap:wrap;gap:10px;margin:10px 0"><button onclick=startFragmentAnimation() style="padding:10px 15px;background:#8bc34a;color:#fff;border:none;border-radius:4px;cursor:pointer;flex:1;min-width:150px">üé¨ Animate Fragment Shader</button>
<button onclick=startCircleAnimation() style="padding:10px 15px;background:#03a9f4;color:#fff;border:none;border-radius:4px;cursor:pointer;flex:1;min-width:150px">üé¨ Animate Circles</button>
<button onclick=stopAnimation() style="padding:10px 15px;background:#f44336;color:#fff;border:none;border-radius:4px;cursor:pointer;flex:1;min-width:120px">‚èπÔ∏è Stop Animation</button></div><div id=svg-container style=width:100%;height:100vh;margin:0;padding:0></div><script>function length(e,t){return Math.sqrt(e*e+t*t)}function mix(e,t,n){return e*(1-n)+t*n}function smoothstep(e,t,n){const s=Math.max(0,Math.min(1,(n-e)/(t-e)));return s*s*(3-2*s)}function fract(e){return e-Math.floor(e)}function sin(e){return Math.sin(e)}function cos(e){return Math.cos(e)}function normToSvg(e,t,n,s){const o=(e+1)*n*.5,i=(-t+1)*s*.5;return{x:o,y:i}}function colorToRgb(e,t,n,s=1){return`rgba(${Math.floor(e*255)}, ${Math.floor(t*255)}, ${Math.floor(n*255)}, ${s})`}function fragmentShader(e,t,n){const s=length(e,t),o=Math.atan2(t,e),i=sin(s*10-n*2)*.5+.5,a=sin(o*8+s*20-n*3)*.5+.5,r=sin(e*10+n)*sin(t*10+n)*.5+.5,c=i*.8+.2,l=a*.6+.4,d=r*.9+.1;return{r:c,g:l,b:d}}function createSVGPattern(){const o=document.getElementById("svg-container"),n=window.innerWidth,s=window.innerHeight,e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("width",n),e.setAttribute("height",s),e.setAttribute("viewBox",`0 0 ${n} ${s}`),e.style.display="block";const t=100,i=n/t,a=s/t,r=Date.now()*.001;for(let n=0;n<t;n++)for(let o=0;o<t;o++){const l=n/t*2-1,d=o/t*2-1,c=fragmentShader(l,d,r),s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.setAttribute("x",n*i),s.setAttribute("y",o*a),s.setAttribute("width",i),s.setAttribute("height",a),s.setAttribute("fill",colorToRgb(c.r,c.g,c.b)),e.appendChild(s)}o.innerHTML="",o.appendChild(e)}function createHighResPattern(){const o=document.getElementById("svg-container"),n=window.innerWidth,s=window.innerHeight,e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("width",n),e.setAttribute("height",s),e.setAttribute("viewBox",`0 0 ${n} ${s}`),e.style.display="block";const t=Date.now()*.001,i=50;for(let r=0;r<i;r++){const a=r/i,c=sin(t+a*Math.PI*2)*.8,l=cos(t*1.3+a*Math.PI*2)*.8,d=normToSvg(c,l,n,s),o=document.createElementNS("http://www.w3.org/2000/svg","circle");o.setAttribute("cx",d.x),o.setAttribute("cy",d.y),o.setAttribute("r",10+sin(t*2+a*10)*5);const u=length(c,l),h=(a*360+t*50)%360;o.setAttribute("fill",`hsl(${h}, 70%, ${60+u*40}%)`),o.setAttribute("opacity",.7),e.appendChild(o)}o.innerHTML="",o.appendChild(e)}function createMandelbrotPattern(){const o=document.getElementById("svg-container"),n=window.innerWidth,s=window.innerHeight,e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("width",n),e.setAttribute("height",s),e.setAttribute("viewBox",`0 0 ${n} ${s}`),e.style.display="block";const t=200,i=n/t,a=s/t;function r(e,t,n=20){let s=0,o=0,i=0;for(;s*s+o*o<=4&&i<n;){const n=s*s-o*o+e;o=2*s*o+t,s=n,i++}return i/n}for(let n=0;n<t;n++)for(let o=0;o<t;o++){const l=n/t*3-1.5,d=o/t*3-1.5,c=r(l,d),s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.setAttribute("x",n*i),s.setAttribute("y",o*a),s.setAttribute("width",i),s.setAttribute("height",a);const u=c*360+200,h=c>.95?0:70,m=c*60+20;s.setAttribute("fill",`hsl(${u}, ${h}%, ${m}%)`),e.appendChild(s)}o.innerHTML="",o.appendChild(e)}let animationId=null,currentPattern="static";createSVGPattern();function animateFragmentShader(){currentPattern==="fragment"&&(createSVGPattern(),animationId=requestAnimationFrame(animateFragmentShader))}function animateCircles(){currentPattern==="circles"&&(createHighResPattern(),animationId=requestAnimationFrame(animateCircles))}function stopAnimation(){animationId&&(cancelAnimationFrame(animationId),animationId=null),currentPattern="static"}function startFragmentAnimation(){stopAnimation(),currentPattern="fragment",animateFragmentShader()}function startCircleAnimation(){stopAnimation(),currentPattern="circles",animateCircles()}window.addEventListener("resize",()=>{currentPattern==="static"&&createSVGPattern()})</script><h2 id=key-concepts>Key Concepts</h2><h3 id=normalized-coordinates>Normalized Coordinates</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// Convert screen position to normalized coordinates (-1 to 1)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>nx</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>i</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>resolution</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ny</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>j</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>resolution</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Convert normalized coordinates back to SVG coordinates
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>normToSvg</span>(<span style=color:#a6e22e>nx</span>, <span style=color:#a6e22e>ny</span>, <span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>height</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>nx</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>width</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.5</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> (<span style=color:#f92672>-</span><span style=color:#a6e22e>ny</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>height</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.5</span>; <span style=color:#75715e>// Flip Y for SVG
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> { <span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span> };
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=fragment-shader-like-functions>Fragment Shader-like Functions</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>fragmentShader</span>(<span style=color:#a6e22e>nx</span>, <span style=color:#a6e22e>ny</span>, <span style=color:#a6e22e>time</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>dist</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>length</span>(<span style=color:#a6e22e>nx</span>, <span style=color:#a6e22e>ny</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>angle</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>atan2</span>(<span style=color:#a6e22e>ny</span>, <span style=color:#a6e22e>nx</span>);
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>rings</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>dist</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>10</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>time</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.5</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.5</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>spiral</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>angle</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>8</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>dist</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>20</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>time</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>3</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.5</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.5</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> { <span style=color:#a6e22e>r</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>rings</span>, <span style=color:#a6e22e>g</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>spiral</span>, <span style=color:#a6e22e>b</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0.8</span> };
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=performance-considerations>Performance Considerations</h3><ul><li><strong>Resolution</strong>: Lower resolution = better performance</li><li><strong>Animation</strong>: Use <code>requestAnimationFrame</code> for smooth animation</li><li><strong>Batch Operations</strong>: Create all elements before adding to DOM</li><li><strong>Consider Canvas</strong>: For very high-resolution patterns, HTML5 Canvas might be more efficient</li></ul><h3 id=advanced-techniques>Advanced Techniques</h3><ol><li><strong>Use viewBox</strong>: Define custom coordinate systems</li><li><strong>Float Precision</strong>: JavaScript numbers are 64-bit floats, perfect for shader-like calculations</li><li><strong>Color Spaces</strong>: Convert between HSL, RGB, and normalized color values</li><li><strong>Time-based Animation</strong>: Use timestamps for consistent animation speed</li><li><strong>Interactive</strong>: Add mouse/touch events for interactive experiences</li></ol><p>This approach gives you the flexibility of fragment shaders with the scalability and styling capabilities of SVG!</p><div><div>Tags:</div><ul><li><a href=/tags/svg/>Svg</a></li><li><a href=/tags/javascript/>Javascript</a></li><li><a href=/tags/graphics/>Graphics</a></li><li><a href=/tags/fragment-shader/>Fragment-Shader</a></li></ul></div></main><footer><p>Copyright 2025. All rights reserved.</p></footer></body></html>